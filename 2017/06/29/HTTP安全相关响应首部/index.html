<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="HTTP安全相关响应首部"><meta name="keywords" content="HTTP安全,响应首部"><meta name="author" content="木兄,undefined"><meta name="copyright" content="木兄"><title>HTTP安全相关响应首部 | 木兄博客</title><link rel="shortcut icon" href="/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#X-XSS-Protection"><span class="toc-number">1.</span> <span class="toc-text">X-XSS-Protection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#X-Content-Type-Options"><span class="toc-number">2.</span> <span class="toc-text">X-Content-Type-Options</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strict-Transport-Security"><span class="toc-number">3.</span> <span class="toc-text">Strict-Transport-Security</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Content-Security-Policy"><span class="toc-number">4.</span> <span class="toc-text">Content-Security-Policy</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">木兄</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">27</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">55</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">木兄博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">HTTP安全相关响应首部</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-06-29</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>  上一篇文章记录了一下X-Frame-Options响应首部，这次记录下其他的与HTTP安全相关的首部字段与信息。</p>
<h3 id="X-XSS-Protection"><a href="#X-XSS-Protection" class="headerlink" title="X-XSS-Protection"></a>X-XSS-Protection</h3><p>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-XSS-Protection" target="_blank" rel="noopener">X-XSS-Protection MDN解释</a></p>
<blockquote>
<p>HTTP X-XSS-Protection 响应头是Internet Explorer，Chrome和Safari的一个功能，当检测到跨站脚本攻击 (XSS)时，浏览器将停止加载页面。虽然这些保护在现代浏览器中基本上是不必要的，当网站实施一个强大的Content-Security-Policy来 禁用内联的JavaScript (‘unsafe-inline’)时, 他们仍然可以为尚不支持 CSP 的旧版浏览器的用户提供保护。</p>
</blockquote>
<blockquote>
<p>X-XSS-Protection: 0 禁止XSS过滤。<br>  X-XSS-Protection: 1 启用XSS过滤（通常浏览器是默认的）。 如果检测到跨站脚本攻击，浏览器将清除页面（删除不安全的部分）。<br>  X-XSS-Protection: 1; mode=block 启用XSS过滤。 如果检测到攻击，浏览器将不会清除页面，而是阻止页面加载。<br>  X-XSS-Protection: 1; report=<reporting-uri> 启用XSS过滤。 如果检测到跨站脚本攻击，浏览器将清除页面并使用CSP report-uri指令的功能发送违规报告。</reporting-uri></p>
</blockquote>
<p>  Nginx配置方法：add_header X-XSS-Protection “1; mode=block”;</p>
<h3 id="X-Content-Type-Options"><a href="#X-Content-Type-Options" class="headerlink" title="X-Content-Type-Options"></a>X-Content-Type-Options</h3><p>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Content-Type-Options" target="_blank" rel="noopener">X-Content-Type-Options MDN解释</a></p>
<blockquote>
<p>X-Content-Type-Options 响应首部相当于一个提示标志，被服务器用来提示客户端一定要遵循在 Content-Type 首部中对  MIME 类型 的设定，而不能对其进行修改。这就禁用了客户端的 MIME 类型嗅探行为，换句话说，也就是意味着网站管理员确定自己的设置没有问题。</p>
</blockquote>
<blockquote>
<p>X-Content-Type-Options: nosniff<br>  nosniff<br>  假如请求类型为以下两种，那么阻止请求的发生：<br>  “style” 但是 MIME 类型不是 “text/css”，<br>  “script” 但是 MIME 类型不是  JavaScript MIME 类型。</p>
</blockquote>
<p>  这个首部主要解决的问题是MIME嗅探问题。</p>
<p>  MIME嗅探是什么呢？MIME嗅探是浏览器对接收到的文件类型（可能传输说明的是text，但是实际上却是image）进行解析，然后按照自己解析出来的文件类型进行处理，目的是为了解决有些文件类型错误导致无法正确显示或者执行的问题。</p>
<p>  好心但是带来了大问题，因为按照自己嗅探的结果执行那就有了被攻击的可能，比如一个上传图片的过程，图片上传时实际上是一个js，MIME嗅探完毕后认为这个是JS，然后就执行js代码，js为XSS等攻击代码，导致问题出现。</p>
<p>  有了X-Content-Type-Options的设置，要求客户端一定遵循content-type的设定，那么就能够比较好的解决这个问题，不让坏人有机可乘。</p>
<p>  Nginx配置：add_header X-Content-Type-Options nosniff;</p>
<h3 id="Strict-Transport-Security"><a href="#Strict-Transport-Security" class="headerlink" title="Strict-Transport-Security"></a>Strict-Transport-Security</h3><p>  <a href="https://developer.mozilla.org/zh-CN/docs/Security/HTTP_Strict_Transport_Security" target="_blank" rel="noopener">Strict-Transport-Security MDN解释</a></p>
<blockquote>
<p>HTTP Strict Transport Security (通常简称为HSTS) 是一个安全功能，它告诉浏览器只能通过HTTPS访问当前资源, 禁止HTTP方式.</p>
</blockquote>
<p>  HTTPS比HTTP安全这个就不用说了，嘿嘿，启用这个的好处也就不多说了，本博客也是启用了HSTS的，强制不允许HTTP访问。</p>
<p>  语法：</p>
<blockquote>
<p>Strict-Transport-Security: max-age=expireTime [; includeSubdomains]</p>
</blockquote>
<p>  max-age设置过期时间，单位是秒，includeSubdomains是是否包含过子域名的意思。</p>
<p>  Nginx配置: add_header Strict-Transport-Security “max-age=31536000; includeSubDomains” always;</p>
<h3 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content-Security-Policy"></a>Content-Security-Policy</h3><p>  这个叫“内容安全政策”，最终设置的东西也会展示在Response Header里，内容比较多，建议直接上MDN学习，给出的很详细，网址如下:</p>
<p>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/Using_Content_Security_Policy" target="_blank" rel="noopener">Content-Security-Policy MDN解释</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">木兄</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://muxblog.tk/2017/06/29/HTTP安全相关响应首部/">https://muxblog.tk/2017/06/29/HTTP安全相关响应首部/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://muxblog.tk" target="_blank">木兄博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/HTTP安全/">HTTP安全</a><a class="post-meta__tags" href="/tags/响应首部/">响应首部</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2017/07/27/Cache-Control与Nginx配置/"><i class="fa fa-chevron-left">  </i><span>Cache-Control与Nginx配置</span></a></div><div class="next-post pull-right"><a href="/2017/06/29/HTTP首部之X-Frame-Options/"><span>HTTP首部之X-Frame-Options</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2018 By 木兄</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>