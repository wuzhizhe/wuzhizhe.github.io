<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="木兄,undefined"><meta name="copyright" content="木兄"><title>木兄的个人博客 | 木兄博客</title><link rel="shortcut icon" href="/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">木兄</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">27</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">55</span></a></div></div></div><nav class="no-bg" id="nav" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">木兄博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="site-info"><div id="site-title">木兄博客</div><div id="site-sub-title">木兄的个人博客</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2017/06/29/HTTP安全相关响应首部/">HTTP安全相关响应首部</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-06-29</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/HTTP安全/">HTTP安全</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/响应首部/">响应首部</a></span><div class="content"><p>  上一篇文章记录了一下X-Frame-Options响应首部，这次记录下其他的与HTTP安全相关的首部字段与信息。</p>
<h3 id="X-XSS-Protection"><a href="#X-XSS-Protection" class="headerlink" title="X-XSS-Protection"></a>X-XSS-Protection</h3><p>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-XSS-Protection" target="_blank" rel="noopener">X-XSS-Protection MDN解释</a></p>
<blockquote>
<p>HTTP X-XSS-Protection 响应头是Internet Explorer，Chrome和Safari的一个功能，当检测到跨站脚本攻击 (XSS)时，浏览器将停止加载页面。虽然这些保护在现代浏览器中基本上是不必要的，当网站实施一个强大的Content-Security-Policy来 禁用内联的JavaScript (‘unsafe-inline’)时, 他们仍然可以为尚不支持 CSP 的旧版浏览器的用户提供保护。</p>
</blockquote>
<blockquote>
<p>X-XSS-Protection: 0 禁止XSS过滤。<br>  X-XSS-Protection: 1 启用XSS过滤（通常浏览器是默认的）。 如果检测到跨站脚本攻击，浏览器将清除页面（删除不安全的部分）。<br>  X-XSS-Protection: 1; mode=block 启用XSS过滤。 如果检测到攻击，浏览器将不会清除页面，而是阻止页面加载。<br>  X-XSS-Protection: 1; report=<reporting-uri> 启用XSS过滤。 如果检测到跨站脚本攻击，浏览器将清除页面并使用CSP report-uri指令的功能发送违规报告。</reporting-uri></p>
</blockquote>
<p>  Nginx配置方法：add_header X-XSS-Protection “1; mode=block”;</p>
<h3 id="X-Content-Type-Options"><a href="#X-Content-Type-Options" class="headerlink" title="X-Content-Type-Options"></a>X-Content-Type-Options</h3><p>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Content-Type-Options" target="_blank" rel="noopener">X-Content-Type-Options MDN解释</a></p>
<blockquote>
<p>X-Content-Type-Options 响应首部相当于一个提示标志，被服务器用来提示客户端一定要遵循在 Content-Type 首部中对  MIME 类型 的设定，而不能对其进行修改。这就禁用了客户端的 MIME 类型嗅探行为，换句话说，也就是意味着网站管理员确定自己的设置没有问题。</p>
</blockquote>
<blockquote>
<p>X-Content-Type-Options: nosniff<br>  nosniff<br>  假如请求类型为以下两种，那么阻止请求的发生：<br>  “style” 但是 MIME 类型不是 “text/css”，<br>  “script” 但是 MIME 类型不是  JavaScript MIME 类型。</p>
</blockquote>
<p>  这个首部主要解决的问题是MIME嗅探问题。</p>
<p>  MIME嗅探是什么呢？MIME嗅探是浏览器对接收到的文件类型（可能传输说明的是text，但是实际上却是image）进行解析，然后按照自己解析出来的文件类型进行处理，目的是为了解决有些文件类型错误导致无法正确显示或者执行的问题。</p>
<p>  好心但是带来了大问题，因为按照自己嗅探的结果执行那就有了被攻击的可能，比如一个上传图片的过程，图片上传时实际上是一个js，MIME嗅探完毕后认为这个是JS，然后就执行js代码，js为XSS等攻击代码，导致问题出现。</p>
<p>  有了X-Content-Type-Options的设置，要求客户端一定遵循content-type的设定，那么就能够比较好的解决这个问题，不让坏人有机可乘。</p>
<p>  Nginx配置：add_header X-Content-Type-Options nosniff;</p>
<h3 id="Strict-Transport-Security"><a href="#Strict-Transport-Security" class="headerlink" title="Strict-Transport-Security"></a>Strict-Transport-Security</h3><p>  <a href="https://developer.mozilla.org/zh-CN/docs/Security/HTTP_Strict_Transport_Security" target="_blank" rel="noopener">Strict-Transport-Security MDN解释</a></p>
<blockquote>
<p>HTTP Strict Transport Security (通常简称为HSTS) 是一个安全功能，它告诉浏览器只能通过HTTPS访问当前资源, 禁止HTTP方式.</p>
</blockquote>
<p>  HTTPS比HTTP安全这个就不用说了，嘿嘿，启用这个的好处也就不多说了，本博客也是启用了HSTS的，强制不允许HTTP访问。</p>
<p>  语法：</p>
<blockquote>
<p>Strict-Transport-Security: max-age=expireTime [; includeSubdomains]</p>
</blockquote>
<p>  max-age设置过期时间，单位是秒，includeSubdomains是是否包含过子域名的意思。</p>
<p>  Nginx配置: add_header Strict-Transport-Security “max-age=31536000; includeSubDomains” always;</p>
<h3 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content-Security-Policy"></a>Content-Security-Policy</h3><p>  这个叫“内容安全政策”，最终设置的东西也会展示在Response Header里，内容比较多，建议直接上MDN学习，给出的很详细，网址如下:</p>
<p>  <a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/Using_Content_Security_Policy" target="_blank" rel="noopener">Content-Security-Policy MDN解释</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/06/29/HTTP首部之X-Frame-Options/">HTTP首部之X-Frame-Options</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-06-29</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/HTTP首部/">HTTP首部</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/盗链/">盗链</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/X-Frame-Options/">X-Frame-Options</a></span><div class="content"><p>  这几天在阅读HTTP相关的书籍，先从简单的入手，先看别人推荐的《图解HTTP》。</p>
<p>  看到HTTP首部的讲解，看到了一个首部名为X-Frame-Options，这个字段是响应首部字段，也就是说是在我们浏览器调试中显示的response headers里面显示的。</p>
<p>  那么这个首部字段是做什么的呢?定义就不展示了直接贴上MDN的定义：</p>
<blockquote>
<p>X-Frame-Options HTTP 响应头是用来给浏览器指示允许一个页面可否在frame,iframe或者object 中展现的标记。网站可以使用此功能，来确保自己网站的内容没有被嵌到别人的网站中去，也从而避免了点击劫持 (clickjacking) 的攻击。</p>
</blockquote>
<blockquote>
<p>X-Frame-Options 有三个值:<br>  DENY<br>  表示该页面不允许在 frame 中展示，即便是在相同域名的页面中嵌套也不允许。<br>  SAMEORIGIN<br>  表示该页面可以在相同域名页面的 frame 中展示。<br>  ALLOW-FROM uri<br>  表示该页面可以在指定来源的 frame 中展示。  </p>
</blockquote>
<p>  这个说的更直白一点就是可以防止直接盗链，大家可以找相关的网址测试。</p>
<p>  如果不设置X-Frame-Options这个字段，默认的情况就是这个网站可以被frame引用，也就是可以被连接嵌入，这样就产生了盗链问题。</p>
<p>  以下面的例子展示一下：（用了百度跟Google，嘿嘿）</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"https://www.baidu.com"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"300px"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"https://www.google.com"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  代码运行<a href="https://jsfiddle.net/dazhizhemu/1z8cd9mg/" target="_blank" rel="noopener">jsfiddle</a></p>
<p>  想起之前的新闻，乐视与优酷之间的因为盗链引发的官司，优酷状告乐视盗链，我看了下两家的网站都没有启用这个选项，不知道为什么，可能是为了分享视频方便？我觉得应该不是这个问题。<br>  去看了一下youtube的视频外链处理方式，首先播放页面是不允许盗链的，设置了X-Frame-Options同源可以引入。外站要引入视频是 “<a href="https://www.youtube.com/embed/0nhrzAUeOVo&quot;" target="_blank" rel="noopener">https://www.youtube.com/embed/0nhrzAUeOVo&quot;</a> 这种格式的，有上下文/embed/,这个网址的X-Frame-Options没有设置，可以在任何网站嵌入。</p>
<p>  所以说吧有些问题可能就不是单纯的从技术角度可以考虑或者理解的了，我真的不信优酷、乐视等网站不懂这些东西，可能有别的原因。</p>
<p>  另外就是有了X-Frame-Options就能解决盗链问题了？</p>
<p>  找到了chrome extension的一个工具可以解决这个不准盗链的问题，这个扩展直接把返回的请求头里面的X-Frame-options给移除了，哈哈哈，不过这个是利用工具了，也就是浏览器行为了，不是网站可以处理的。</p>
<p>  忘了写Nginx如何添加X-Frame-Options支持了，在server里：add_header X-Frame-Options “SAMEORIGIN”;<br>  其他的Apache IIS等在 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options" target="_blank" rel="noopener">MDN网址</a> 上有相关说明。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/06/16/Android短信拦截软件推荐/">Android短信拦截软件推荐</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-06-16</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/短信拦截/">短信拦截</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/sms-blocker/">sms blocker</a></span><div class="content"><h2 id="深受垃圾短信骚扰的危害"><a href="#深受垃圾短信骚扰的危害" class="headerlink" title="深受垃圾短信骚扰的危害"></a>深受垃圾短信骚扰的危害</h2><p>  现在的人为了利益，什么事情都做，真的是没底线了，各种垃圾电话/短信，烦死人。最近一段时间中国移动疯狂轰炸，每天收到很多条关于它的流量短信，各种流量套餐推荐，不厌其烦，没工夫挨个收拾，什么0000之类的，还有其他的，手机号码注册过什么东西，商家无底线的推送，可能还有某个淘宝店之类的推送。</p>
<p>  我相信很多人应该都有这种体会，说句实在的，现在的手机短信的功能就是个接收验证码还有点用了，其他的用处真的不多了，为了解决这问题，找了很多相关工具，最终确定了一款。</p>
<h2 id="查找支持关键字拦截短信的软件"><a href="#查找支持关键字拦截短信的软件" class="headerlink" title="查找支持关键字拦截短信的软件"></a>查找支持关键字拦截短信的软件</h2><p>  手机系统，Android 7.1.1，非IOS，无法安装xposed，即使能安装也不想安装。</p>
<p>  所以就找正常的短信拦截软件，思维一开始就想到了国内的那些管家、卫士一类的软件，找了两个发现，首先这类软件都需要root权限，然后还是各种权限都给了才能工作，没办法不想给所以就不用了。</p>
<p>  最终在Google Play上确定了这个安装量很大的<a href="https://play.google.com/store/apps/details?id=com.smsBlocker" target="_blank" rel="noopener">Sms Blocker</a>.<br>  有收费版与免费版，免费版一般就够用了，收费版挺贵的8.99美元，哈哈。</p>
<p>  支持所有Android系统，4.4以下可以直接使用，4.4以上软件安装后需要设置为默认短信软件。</p>
<p>  软件支持设置黑名单、白名单，每一种名单都支持发送人具体号码、发送人号码段（比如10086可以设置为1008*）、发送信息中的关键字 这三种模式，可以根据模式自行调整设置。</p>
<p>  软件截图：</p>
<p>  <img src="/images/sms-blocker/sms-blocker01.png" alt="001"><br>  <img src="/images/sms-blocker/sms-blocker02.png" alt="003"><br>  <img src="/images/sms-blocker/sms-blocker03.png" alt="002"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/06/13/overflow解决父元素因为子元素漂浮没高度的问题/">overflow解决父元素因为子元素漂浮没高度的问题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-06-13</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/css/">css</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/overflow/">overflow</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/float/">float</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/height/">height</a></span><div class="content"><h2 id="子元素漂浮导致父元素没有高度"><a href="#子元素漂浮导致父元素没有高度" class="headerlink" title="子元素漂浮导致父元素没有高度"></a>子元素漂浮导致父元素没有高度</h2><p>  HTML DOM元素，当子元素设置了float为left或者right时，元素就漂浮起来了，这个时候它就不占用任何的宽高空间了，所以就导致了该元素的父元素的高度不正常，如果全部漂浮，父元素的高度为零。</p>
<p>  这个时候在其他的一些元素的布局时就会出现问题，比如父元素下面的元素，很可能与父元素重叠，并且在一些需要计算高度的情况下会导致布局错误，界面混乱。</p>
<h2 id="如何解决这问题？"><a href="#如何解决这问题？" class="headerlink" title="如何解决这问题？"></a>如何解决这问题？</h2><p>  解决这个问题的方法也很简单，在父元素上使用overflow: auto; 这样就可以解决了这个问题，overflow:auto可以清楚子元素的浮动。</p>
<h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child1"</span>&gt;</span>飘过来<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child2"</span>&gt;</span>浮过去<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clear"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container2"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child1"</span>&gt;</span>飘过来<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child2"</span>&gt;</span>浮过去<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.child1</span>,</span><br><span class="line"><span class="selector-class">.child2</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container1</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container2</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  <a href="https://jsfiddle.net/dazhizhemu/25jwjca5/" target="_blank" rel="noopener">代码运行JSFIDDLE</a></p>
<p>  代码运行效果图：<br>  <img src="/images/overflow-auto.png" alt=""></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/06/01/phantomjs抓取动态加载的网页数据/">phantomjs抓取动态加载的网页数据</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-06-01</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/phantom/">phantom</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/爬虫/">爬虫</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/nodejs/">nodejs</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/superagent/">superagent</a></span><div class="content"><h2 id="为什么要抓取数据"><a href="#为什么要抓取数据" class="headerlink" title="为什么要抓取数据"></a>为什么要抓取数据</h2><p>  其实需求来源非常简单，我要看一本小说，发现这个小说只在某个网站上有，可以免费观看，但是网站体验实在太差，有非常多的广告，一直出现，无法屏蔽，并且内容低劣。这就想起来为什么不能自己抓取这里面的内容呢？自己做个像爬虫的工具，把小说内容全部爬取出来就可以了。</p>
<h2 id="具体实践"><a href="#具体实践" class="headerlink" title="具体实践"></a>具体实践</h2><p>  说做就做，首先查找资料发现python是这方面的最厉害的工具，但是没接触过python，上手比较麻烦，就查找别的工具Node、Java都可以，于是选择了Node。</p>
<p>  用Node的superagent进行http网络请求，获取小说页面的数据（这里也可以用自带的HTTP模块进行也可以，因为比较简单，就是获取页面内容，没有复杂的东西）。</p>
<p>  superagent介绍:</p>
<blockquote>
<p>SuperAgent is a small progressive client-side HTTP request library, and Node.js module with the same API, sporting many high-level HTTP client features. </p>
</blockquote>
<p>  <a href="https://github.com/visionmedia/superagent" target="_blank" rel="noopener">Github地址</a></p>
<p>  有了工具能够获取回网页的内容后，就可以对获取到的HTML元素进行DOM解析，获取章节数据，根据章节数据获取每章每节的小说具体内容，然后整理生成小说。</p>
<p>  Node是服务端的Js脚本，如何处理DOM呢？在前端处理DOM的工具特别多，可以直接用JavaScript，也可以用比较常见的工具比如JQuery。</p>
<p>  这里推荐一个Node处理HTML DOM元素的工具，名字是cheerio, <a href="https://github.com/cheeriojs/cheerio" target="_blank" rel="noopener">Github地址</a><br>  简介：</p>
<blockquote>
<p>Fast, flexible &amp; lean implementation of core jQuery designed specifically for the server.</p>
</blockquote>
<p>  使用cheerio可以像使用jquery那样在Node端处理DOM，具体的api以及常用方法详见Git。</p>
<p>  至于具体的Node web项目或者什么项目开发就不具体介绍了，如果想做成web型的，可以用express/koa等做中间件，然后找具体的template进行开发，不在此做进一步记录。</p>
<h2 id="新的问题"><a href="#新的问题" class="headerlink" title="新的问题"></a>新的问题</h2><p>  做到这里就能满足一般的抓取需求了，只需要根据不同的网站做不同的规则解析就可以了。</p>
<p>  但是前几天上了一个网站，发现了一个新的问题，小说网站也有动态加载内容的。。。。，这个真的特别少见，因为基本上都是纯文字，完全没有什么流量压力之类的，但是确实有的网站就是这么做了，网页初次加载完之后会有一个延时的ajax请求，获取完整的小说数据，然后更新当前页面。</p>
<p>  这个就真的比较尴尬，因为一般http请求就是把这次http请求的数据抓取回来就完了，不会在处理后续的数据，这样无法处理上面这种延时加载的情况，于是需要找新的工具支持。</p>
<p>  此时就有了下面的新工具。</p>
<h2 id="支持延时获取数据的爬虫工具phantomjs"><a href="#支持延时获取数据的爬虫工具phantomjs" class="headerlink" title="支持延时获取数据的爬虫工具phantomjs"></a>支持延时获取数据的爬虫工具phantomjs</h2><p>  phantom是一个神奇的工具，基于webkit的服务器Javscript api工具，这个就很神奇了，它可以支持上面想要的延时功能，当然phantomjs不止是这一点功能，不过是这里的需求只要用它的这个功能而已。</p>
<p>  <a href="http://phantomjs.org/" target="_blank" rel="noopener">官网</a><br>  <a href="https://github.com/ariya/phantomjs" target="_blank" rel="noopener">Git地址</a><br>  官网简介:</p>
<blockquote>
<p>PhantomJS is a headless WebKit scriptable with a JavaScript API. It has fast and native support for various web standards: DOM handling, CSS selector, JSON, Canvas, and SVG.</p>
</blockquote>
<p>  在这里可以使用延时，延时之后再进行数据获取，这样就能获取到相关的完整内容了。</p>
<p>  可以直接使用phantomjs执行js代码进行数据抓取，因为是node项目，也可以使用node的phantomjs-node模块进行开发。<br>  <a href="https://github.com/amir20/phantomjs-node" target="_blank" rel="noopener">Github phantomjs-node</a></p>
<p>  phantomjs-node使用简单示例</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params">url, array, index, cb, length, repeat</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> instance = <span class="keyword">await</span> phantom.create();</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> instance.createPage();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> page.on(<span class="string">"onResourceRequested"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">requestData</span>) </span>&#123;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> page.on(<span class="string">'onResourceReceived'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//打开页面</span></span><br><span class="line">      <span class="keyword">const</span> status = <span class="keyword">await</span> page.open(url);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//延时</span></span><br><span class="line">      <span class="keyword">await</span> sleep(<span class="number">2000</span>);</span><br><span class="line">      <span class="comment">//获取页面内容</span></span><br><span class="line">      <span class="keyword">const</span> content = <span class="keyword">await</span> page.property(<span class="string">'content'</span>);</span><br><span class="line">      <span class="keyword">let</span> $ = cheerio.load(content);</span><br><span class="line">      <span class="keyword">let</span> title = $(<span class="string">'.headline'</span>).html();</span><br><span class="line">      <span class="keyword">let</span> novel = $(<span class="string">'#content'</span>).html();</span><br><span class="line">      handleContent(title, novel);</span><br><span class="line">      cb();</span><br><span class="line">      <span class="keyword">await</span> instance.exit();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      handleErr(err);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  最后这里有个自用的简单小说爬虫程序，代码非常简陋，有点乱，主要用来抓取小说内容，<a href="https://github.com/wuzhizhe/my-little-spider" target="_blank" rel="noopener">Git地址</a></p>
<h2 id="新发现的问题"><a href="#新发现的问题" class="headerlink" title="新发现的问题"></a>新发现的问题</h2><p>  <strong>2017-06-01 新发现phantomjs没有被杀死的问题</strong></p>
<p>  用的是node的phantom模块，电脑安装了phantomjs后，node模块可以与之通信。</p>
<p>  今天发现存在一个问题，有些情况下，phantomjs无法退出，进入查看进程没有被杀死一直在那挂着。因为是异步调用用了await等待instance.exit()成功后才能继续，现在显然是失败了，这种情况下需要去手动杀死进程。。。。。，然后返回结果后下面的程序继续执行。</p>
<p>  暂时没有找到好的解决办法，先记录下来，等有了办法了再更新上去。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/05/27/安卓用户之痛/">安卓用户之痛</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-05-27</time><div class="content"><h2 id="使用安卓的痛苦"><a href="#使用安卓的痛苦" class="headerlink" title="使用安卓的痛苦"></a>使用安卓的痛苦</h2><p>  安卓系统本身不是一个特别差的系统，但是因为种种原因，导致了在国内使用安卓系统是一件非常痛苦的事情。</p>
<p>  记录下使用安卓系统的一些比较痛苦的事情。</p>
<p>  A. Google Service，这个就不用说了，在国内应该还没有哪家手机是不阉割的，这也没办法因为被挡在墙外了，所以就有了两个障碍，第一个就是先安装上Google play service。第二个就是安装上了之后如何FQ的问题。</p>
<p>  B. 各大APP厂商的轰炸是滥用权限。后台自启、关联唤醒、充电唤醒等等一系列恶行，让你的本来就不怎么样的手机/系统更加的脆弱不堪。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/05/26/chrome扩展推荐/">chrome扩展推荐（2017/05/26更新）</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-05-26</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/chrome/">chrome</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/chrome-extension/">chrome extension</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/github/">github</a></span><div class="content"><p>本文记录所有自己喜欢的chrome扩展，会不断更新。</p>
<p>因为本人是开发狗，所以会有很一些开发相关的插件，如不需要直接略过。</p>
<p>对于想看插件源码的开发人员，相关的项目如果有github地址，就附上github项目地址了。</p>
<h2 id="非开发类："><a href="#非开发类：" class="headerlink" title="非开发类："></a>非开发类：</h2><hr>
<h3 id="简体繁体转换工具-新同文堂"><a href="#简体繁体转换工具-新同文堂" class="headerlink" title="简体繁体转换工具    新同文堂"></a>简体繁体转换工具    <a href="https://chrome.google.com/webstore/detail/new-tong-wen-tang/ldmgbgaoglmaiblpnphffibpbfchjaeg" target="_blank" rel="noopener">新同文堂</a></h3><p>这个是一款chrome插件，用来进行简体繁体转换的工具： <a href="https://github.com/softcup/New-Tongwentang-for-Chrome" target="_blank" rel="noopener">Github项目地址</a></p>
<p>Github上没有readme，哈哈，就是一款简繁体转换工具，支持直接网页转换，对于动态加载的数据可以使用右键菜单进行转换。</p>
<p>可以设置通用转换规则，也可以自订转换规则，对于特殊的网站进行特殊转换，还可以自己设置转换词汇。</p>
<p>繁体网站转换前：<br><img src="/images/chrome-extension-suggest/tongwen0.PNG" alt="繁体网站转换前"><br>繁体网站转换后：<br><img src="/images/chrome-extension-suggest/tongwen1.PNG" alt="繁体网站转换后"></p>
<p>扩展设置图<br><img src="/images/chrome-extension-suggest/tongwen3.PNG" alt="设置界面"></p>
<hr>
<h3 id="代理设置扩展-Proxy-SwitchyOmega"><a href="#代理设置扩展-Proxy-SwitchyOmega" class="headerlink" title="代理设置扩展    Proxy SwitchyOmega"></a>代理设置扩展    <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="noopener">Proxy SwitchyOmega</a></h3><p>这个是扶墙必备啊，在chrome上特别好用，当然还有类似的其他应用，不在这里推荐了，只推荐这一款。<br><strong>这里要明确 一点就是，这个扩展本身不是扶墙工具，只是能够让你的浏览器通过代理扶墙，所以还是要有自己的扶墙通道的，否则不能用</strong></p>
<p>扩展支持多种模式的代理，支持常见的HTTP HTTPS SOCKS4 SOCKS5等协议。<br><a href="https://github.com/FelisCatus/SwitchyOmega" target="_blank" rel="noopener">Github项目地址</a></p>
<p>看下图片：<br><img src="/images/chrome-extension-suggest/omega0.PNG" alt="设置界面"><br><img src="/images/chrome-extension-suggest/omega1.PNG" alt="设置界面"><br><img src="/images/chrome-extension-suggest/omega2.PNG" alt="设置界面"><br><img src="/images/chrome-extension-suggest/omega3.PNG" alt="设置界面"></p>
<hr>
<h3 id="chrome经典蓝色主题-Default-Blue-Theme"><a href="#chrome经典蓝色主题-Default-Blue-Theme" class="headerlink" title="chrome经典蓝色主题    Default Blue Theme"></a>chrome经典蓝色主题    <a href="https://chrome.google.com/webstore/detail/default-blue-theme/fiofpkllbibbpfigiafejadpekddaoic" target="_blank" rel="noopener">Default Blue Theme</a></h3><p>这个就比较简单了，就是原来windows xp系统上的chrome展示样子。</p>
<p><a href="https://github.com/wuzhizhe/ChromeClassicBlueTheme" target="_blank" rel="noopener">Github项目地址</a></p>
<p>效果展示：<br><img src="/images/chrome-extension-suggest/bluethme.PNG" alt="设置界面"></p>
<hr>
<h3 id="扩展管理工具-SimpleExtManager"><a href="#扩展管理工具-SimpleExtManager" class="headerlink" title="扩展管理工具 SimpleExtManager"></a>扩展管理工具 <a href="https://chrome.google.com/webstore/detail/simpleextmanager/kniehgiejgnnpgojkdhhjbgbllnfkfdk" target="_blank" rel="noopener">SimpleExtManager</a></h3><p>为什么推荐这个扩展管理工具呢？如果你有非常多的扩展，用肉眼已经无法一眼或者很快就找到的时候就只能靠搜索功能了，目前其他的扩展管理工具，什么一键扩展管理等都是没有搜索功能的（我之前用的时候没有，可能现在有了），所以就推荐它了，如果你与我这种情况类似，一大堆扩展想启用的时候找不到，这个工具绝对满足你的需求。</p>
<p><img src="/images/chrome-extension-suggest/simpleextmanager.png" alt="展示界面"></p>
<hr>
<h3 id="listen1音乐"><a href="#listen1音乐" class="headerlink" title="listen1音乐"></a><a href="http://listen1.github.io/listen1/" target="_blank" rel="noopener">listen1音乐</a></h3><p>这个是一个听歌的软件，不光支持chrome扩展，但是它有chrome扩展，所以也就在这推荐了。</p>
<p>它可以搜索网易、QQ、虾米音乐的歌曲。<br><img src="http://i.imgur.com/Ae6ItmA.png" alt="展示界面"></p>
<hr>
<h3 id="剪贴板历史纪录-Clipboard-History-2"><a href="#剪贴板历史纪录-Clipboard-History-2" class="headerlink" title="剪贴板历史纪录  Clipboard History 2"></a>剪贴板历史纪录  <a href="https://chrome.google.com/webstore/detail/clipboard-history-2/ajiejmhbejpdgkkigpddefnjmgcbkenk" target="_blank" rel="noopener">Clipboard History 2</a></h3><p>有过刚刚剪贴的内容找不到的这种痛苦吗？现在有办法解决了，找一个可以记录剪贴板历史纪录的工具，记录你的剪贴内容。</p>
<p>展示界面：<br>可以选择要处理的记录，导出成数据，也可以删除，可以加喜欢标签。<br><img src="/images/chrome-extension-suggest/clipboard.png" alt="展示界面"></p>
<p>设置界面, 在设置界面可以设置以下几项：</p>
<p>A. 超时，如果剪贴记录已经超过多少（分钟/小时/天/周/月），就删除记录。</p>
<p>B. 最大存储量，最多存储多少条数据。</p>
<p>C. 超过多少字符的剪贴内容不要保存。</p>
<p>还有其他的一些简单设置，<strong>以上三条建议一定设置并开启</strong>，否则数据量过大过多没有多大的意义，并且占用内存。</p>
<p><img src="/images/chrome-extension-suggest/clipboardsetting.png" alt="设置界面"></p>
<h2 id="开发类扩展："><a href="#开发类扩展：" class="headerlink" title="开发类扩展："></a>开发类扩展：</h2><p>### </p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/05/25/国外离线下载网站seedr/">国外离线下载网站seedr</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-05-25</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/offline-download/">offline download</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/离线下载/">离线下载</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/seedr/">seedr</a></span><div class="content"><p>最近发现国内的离线工具似乎越来越差了，没办法了，只能向国外寻找了。</p>
<h2 id="国内离线工具现状"><a href="#国内离线工具现状" class="headerlink" title="国内离线工具现状"></a>国内离线工具现状</h2><p>吐槽下国内的这些垃圾东西，我最常用的几个网站/软件：</p>
<p>A. 迅雷离线</p>
<p>  这个早期是收费的，没有免费可用，不记得是多少钱了，那时是个学生狗，不舍得花钱，用的很少。后来开始使用，但是用了一段时间后，迅雷因为版权的问题不得不妥协，一大堆东西都是“因为版权问题。。。。”，无法下载，吐了，不再缴纳会员费，就正常非会员使用了，非会员直接限速，这个是绝对可以肯定的，没办法，抛弃。</p>
<p>B. QQ旋风</p>
<p>  这个从我接触互联网开始就有了，我接触互联网比较晚，旋风大概是05年的产品？不是很清楚，反正刚开始接触互联网是08年，那时候就用旋风下载，没有感觉有什么特殊的，后来离线下载来了，QQ旋风有积分制度，积分够了可以赠送免费离线下载空间，这个简直就觉了，学生时代天天刷分，终于够了，能够好好的离线了，最大文件有限制不记得多大了，总空间25GB，够用了，但是跟迅雷一样版权问题，还有个比迅雷还严重的问题经常出现，离线成功了，下载到本地没有速度（<strong>不是限速，是没速度</strong>），真是日了狗了。。。</p>
<p>C. 115网盘</p>
<p>  这个是真心神器啊，但是现在的费用问题就不多说了，虽然说收费是一个企业存活发展的正常途径，但是这个费用真的不是一般的贵啊，抛弃。。。</p>
<p>D. 百度网盘</p>
<p>  这个用的次数最少了，它的离线下载检测不是很清楚，感觉很一般，然后就是这个家伙做大了之后的限速问题，简直丧心病狂。百度这个没节操的公司，真是无语。。。</p>
<h2 id="转向国外工具"><a href="#转向国外工具" class="headerlink" title="转向国外工具"></a>转向国外工具</h2><p>国外的工具都是比较良性的，一般都是收费的，免费的一般不够用。.</p>
<p>但是国外还是有很多优秀的工具的，比较好的有filestream, furk, seedr等</p>
<p>这里就是介绍下seedr：</p>
<p>这个网站真的很好啊，首先免费用户有2.5G的空间大小，然后有一个下载槽，关键是没有下载速度限制，一般的文件2.5G大小就够用了。没有成人视频等限制。</p>
<p><strong>seedr目前只支持BT下载</strong></p>
<p>空间扩展：如果觉得2.5GB不够用，可以通过邀请好友以及社交网站宣传来免费升级，最多可以再扩展5.5GB，这样就是8GB，这样的空间应对一般的文件真的足够了。。。</p>
<p>下面是网站官网：<a href="https://www.seedr.cc/?r=636708" target="_blank" rel="noopener">https://www.seedr.cc</a>，点击就可以进入注册账号，使用服务。</p>
<p>下面是一段从<a href="https://www.raymond.cc/blog/how-to-download-torrent-if-you-cant-install-and-run-bittorrent-client/" target="_blank" rel="noopener">raymond</a>引用的文字:</p>
<blockquote>
<p>Seedr accepts local torrent files, magnet links or a URL of a remote torrent file. You can only transfer one torrent at a time to the Seedr servers but can download multiple completed torrents from Seedr. We found the download speed very good and all our files downloaded at the maximum speed. There’s also a <a href="https://chrome.google.com/webstore/detail/seedr/abfimpkhacgimamjbiegeoponlepcbob" target="_blank" rel="noopener">Seedr Chrome extension</a>  for directly adding links.</p>
</blockquote>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/05/18/关于订阅内容的反思/">关于订阅内容的反思</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-05-18</time><div class="content"><h3 id="为什么订阅？"><a href="#为什么订阅？" class="headerlink" title="为什么订阅？"></a>为什么订阅？</h3><p>  为什么会订阅这个RSS/微信文章/…？？</p>
<p>  A. 因为当初读到这个源下分享/发布的某一篇文章，觉得文章真的写的很好，于是就把这个文章源订阅了。</p>
<p>  B. 想查询某些方面的资料，于是就看到了别人写的资源推荐或者或者根据搜索引擎搜索到了，订阅了相关源。</p>
<p>  C. 一直关注着某个人/网站/…等资源，在那里面进行了推荐，因为出于对这个源/人/网站本身的信任，所以就订阅了。</p>
<p>  一般的订阅原因就是这样的，不出这几种。</p>
<h3 id="阅读情况如何？"><a href="#阅读情况如何？" class="headerlink" title="阅读情况如何？"></a>阅读情况如何？</h3><p>  那订阅之后的阅读情况又如何呢？</p>
<p>  现在的我一般就是这几种情况：</p>
<p>  A. 这个源真的是我的需求，推荐的内容也确实跟我想要想看的符合，我经常看这个源的内容，这种对自己是优质订阅源。</p>
<p>  B. 这个源订阅订阅了，但是发文章/内容不是很频繁，不过内容全部是精品内容，写的人也用心，发出来的东西也是高品质，每次看文章都会给人以相关的收获，无论是知识上，还是工具、内容等其他的东西。这种订阅源对自己就是绝对的优质订阅源了。</p>
<p>  C. 这个订阅源发的东西可能也不多，也不经常看，偶尔看一下，这种对自己就是一般源，不必放弃，放在那里偶尔看一下即可。</p>
<p>  D. 这个源发的内容很多/很少，但是自己几乎从来不看，就是看着它的文章/内容数目不断的增长，这个订阅源对自己而言就是没什么用的订阅源了。</p>
<h3 id="如何处理不常阅读的订阅源？"><a href="#如何处理不常阅读的订阅源？" class="headerlink" title="如何处理不常阅读的订阅源？"></a>如何处理不常阅读的订阅源？</h3><p>  怎么处理这种不常阅读的订阅源呢？</p>
<p>  A. 对于上面D类的订阅源，应该直接舍弃，<strong>并且要反思自己为什么会订阅它，以后订阅时应该提前甄别</strong></p>
<p>  B. 对于那种发文章不多，但是也偶尔看一下的订阅源，应该开辟一个专门的处理栏目，将这一类的订阅源规整到里面（如何订阅内容支持自己整理，比如RSS支持，但是微信订阅号就不支持）。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2017/05/15/css3-box-sizing/">css3-box-sizing</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-05-15</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/css3/">css3</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/box-sizing/">box-sizing</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/盒子模型/">盒子模型</a></span><div class="content"><h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing"></a>box-sizing</h2><p>  之前一直没有发现这个东西，今天研究时发现的。原来写css样式时，元素的padding border margin的值在元素中计算元素最终的宽高值是需要再次相加的，因此如果想要元素总高度不变的话，需要设置border padding的时候需要重新设置里面元素的高度，这个是个很苦恼的事情，用css检测工具检测的时候经常会提醒这样写代码会导致元素宽高不受控制表现。</p>
<p>  但是现在有了box-sizing可以完美解决这个问题。</p>
<p>  目前的box-sizing有以下两个主要属性：</p>
<h3 id="box-sizing-content-box"><a href="#box-sizing-content-box" class="headerlink" title="box-sizing: content-box"></a>box-sizing: content-box</h3><p>  这个属性与之前不设置时是一样的，就是宽度高度只包括内容，不包括margin padding border等值。</p>
<h3 id="box-sizing-border-box"><a href="#box-sizing-border-box" class="headerlink" title="box-sizing: border-box"></a>box-sizing: border-box</h3><p>  border-box值就是一个比较神奇的东西了，在盒子模型里，你如果使用了box-sizing:boder-box;那么所有的这些属性加起来的值才是最终设置的值。</p>
<blockquote>
<p>width = border + padding + width of the content;<br>  height = border + padding + height of the content;</p>
</blockquote>
<h2 id="实战展示"><a href="#实战展示" class="headerlink" title="实战展示"></a>实战展示</h2><p>具体的效果以及代码见下面：</p>
<p>灰色部分是使用了border-box属性的div,而蓝紫色部分是使用了content-box属性的div，上面的两个50% div能完美的包含在父元素中，而下面的div因为border padding等属性成为两行。</p>
<p>以下展示具体代码运行示例见: <a href="https://jsfiddle.net/dazhizhemu/4qhnyq95/" target="_blank" rel="noopener">Jsfiddle box-sizing</a></p>
<p><img src="/images/box-sizing/box-sizing.png" alt="使用box-sizing"></p>
<p>具体代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"> </span></span><br><span class="line"><span class="undefined">* &#123;</span></span><br><span class="line"><span class="undefined">    font-size: 16px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span><span class="selector-class">.border-box-container</span> &#123;</span></span><br><span class="line"><span class="undefined">    height: 5em;</span></span><br><span class="line"><span class="undefined">    width: 30em;</span></span><br><span class="line"><span class="undefined">    border: 1em solid red;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span><span class="selector-class">.content-box-container</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">margin-top</span>: 1<span class="selector-class">.2em</span>;</span></span><br><span class="line"><span class="undefined">    height: 5em;</span></span><br><span class="line"><span class="undefined">    width: 30em;</span></span><br><span class="line"><span class="undefined">    border: 1em solid red;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span><span class="selector-class">.border-box-container</span>  <span class="selector-tag">div</span><span class="selector-class">.box</span> &#123; </span></span><br><span class="line"><span class="css">    <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">-moz-box-sizing</span><span class="selector-pseudo">:border-box</span>; </span></span><br><span class="line"><span class="css">    <span class="selector-tag">-webkit-box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span><span class="selector-pseudo">:50</span>%; </span></span><br><span class="line"><span class="undefined">    height: 100%;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">border</span><span class="selector-pseudo">:0.8em</span> <span class="selector-tag">solid</span> <span class="selector-tag">gray</span>; </span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">float</span><span class="selector-pseudo">:left</span>;</span></span><br><span class="line"><span class="undefined">    display: flex;</span></span><br><span class="line"><span class="undefined">    align-items: center;</span></span><br><span class="line"><span class="undefined">    justify-content: center; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span><span class="selector-class">.content-box-container</span> <span class="selector-tag">div</span><span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:content-box</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">-moz-box-sizing</span><span class="selector-pseudo">:content-box</span>; </span></span><br><span class="line"><span class="css">    <span class="selector-tag">-webkit-box-sizing</span><span class="selector-pseudo">:content-box</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span><span class="selector-pseudo">:50</span>%; </span></span><br><span class="line"><span class="undefined">    height: 100%;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">border</span><span class="selector-pseudo">:0.8em</span> <span class="selector-tag">solid</span> <span class="selector-id">#8181d2</span>; </span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">float</span><span class="selector-pseudo">:left</span>; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"border-box-container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>这个 div 占据左半部分。<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>这个 div 占据右半部分。<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content-box-container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>这个 div 占据左半部分。<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>这个 div 占据右半部分。<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2018 By 木兄</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>